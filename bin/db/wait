#!/bin/bash
source color_logs
source ../conf/.db.env

echo $POSTGRES_USER

echo_info "Aguardando a base de dados..."
until docker-compose exec $SERVICE_NAME psql -h localhost -U $POSTGRES_USER -d $POSTGRES_DB_ACESSO -A -c '\l' >/dev/null 2>&1; do
  E=$(docker-compose logs --tail 1 | tail -1)
  echo_warning "Postgres is unavailable - sleeping"
  sleep 1
done

echo_success "Conectado com sucesso"
